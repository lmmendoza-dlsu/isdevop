FROM centos:7

# Install MySQL Server
RUN yum -y update && yum install -y mysql-server && yum clean all

# Start MySQL service
RUN systemctl enable mysqld && systemctl start mysqld && sleep 5

# Set root password for MySQL
RUN mysqladmin -u root password 'cymbeline_pass'

# Create a new MySQL user 'sa' with all privileges
RUN mysql -u root -pyour_password_here -e "CREATE USER 'sa'@'localhost' IDENTIFIED BY 'cymbeline_pass';" \
    && mysql -u root -pyour_password_here -e "GRANT ALL PRIVILEGES ON *.* TO 'sa'@'localhost' WITH GRANT OPTION;" \
    && mysql -u root -pyour_password_here -e "FLUSH PRIVILEGES;"

# Expose MySQL port
EXPOSE 3306

# Start MySQL service on container startup
CMD ["mysqld"]
